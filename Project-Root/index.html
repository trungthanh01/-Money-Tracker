<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Tài Chính Cá Nhân - 5 Hũ</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/project-root/style.css">

</head>
<body class="text-gray-800">

    <!-- Main Application Container -->
    <div id="app-container" class="max-w-7xl mx-auto p-4">

        <!-- Header -->
        <header class="bg-white shadow-md rounded-xl p-4 mb-6 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-indigo-500 rounded-full flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></svg>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">Trình Quản Lý Tài Chính</h1>
            </div>
            <div id="auth-info" class="text-xs text-gray-500">Dữ liệu được lưu trên trình duyệt này</div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-md rounded-xl p-2 mb-6">
            <ul class="flex items-center justify-center space-x-2 sm:space-x-4">
                <li><a href="#dashboard-view"><button data-view="dashboard" class="nav-btn flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors duration-200"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span>Bảng Tin</span></button></a></li>
                <li><a href="#investment-view"><button data-view="investment" class="nav-btn flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors duration-200"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg><span>Đầu Tư</span></button></a></li>
                <li><a href="#education-view"><button data-view="education" class="nav-btn flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors duration-200"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg><span>Học Tập</span></button></a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main>
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view active">
                <!-- Summary Section -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white shadow-md rounded-xl p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between col-span-1 md:col-span-2">
                        <div>
                            <p class="text-gray-500">Tổng Số Dư</p>
                            <p id="total-balance" class="text-4xl font-bold text-indigo-600">0 ₫</p>
                        </div>
                        <div class="flex gap-2 mt-4 sm:mt-0">
                            <button id="add-income-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-5 rounded-lg transition-colors">Thêm Thu Nhập</button>
                            <button id="add-expense-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-5 rounded-lg transition-colors">Thêm Chi Tiêu</button>
                        </div>
                    </div>
                    <div class="bg-white shadow-md rounded-xl p-6">
                         <p class="text-gray-500 mb-2">Phân Bổ Tài Sản</p>
                         <canvas id="jars-chart"></canvas>
                    </div>
                </div>

                <!-- Jars Section -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
                    <!-- Jar Cards will be inserted here by JS -->
                </div>
            </div>

            <!-- Investment View -->
            <div id="investment-view" class="view">
                <div class="bg-white shadow-md rounded-xl p-6">
                    <h2 class="text-2xl font-bold mb-4">Quản Lý Đầu Tư</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Wallet Tracking -->
                        <div>
                            <h3 class="text-lg font-semibold mb-2">Theo dõi Ví Lạnh (Ethereum)</h3>
                            <p class="text-sm text-gray-600 mb-4">Kết nối với địa chỉ ví Ethereum của bạn để theo dõi tài sản và P/L. Chúng tôi sử dụng API công khai của Etherscan.</p>
                            <div class="space-y-3">
                                <div>
                                    <label for="etherscan-api-key" class="font-medium">Etherscan API Key</label>
                                    <input type="text" id="etherscan-api-key" placeholder="API Key của bạn (Lấy từ Etherscan.io)" class="w-full p-2 border rounded-lg mt-1">
                                </div>
                                <div>
                                    <label for="wallet-address" class="font-medium">Địa chỉ ví Ethereum</label>
                                    <input type="text" id="wallet-address" placeholder="0x..." class="w-full p-2 border rounded-lg mt-1">
                                </div>
                                <button id="track-wallet-btn" class="w-full bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors">Theo dõi Ví</button>
                            </div>
                            <div id="wallet-loading" class="mt-4 text-center hidden">
                                <p>Đang tải dữ liệu ví...</p>
                            </div>
                            <div id="wallet-error" class="mt-4 text-center text-red-500 hidden"></div>
                            <div id="wallet-results" class="mt-6 hidden">
                                <h4 class="font-semibold">Tổng quan tài sản:</h4>
                                <p id="wallet-total-value" class="text-2xl font-bold text-green-600"></p>
                                <div id="wallet-assets" class="mt-4 space-y-2 max-h-60 overflow-y-auto pr-2"></div>
                            </div>
                        </div>
                        <!-- Investment History (Manual Entry) -->
                        <div>
                            <h3 class="text-lg font-semibold mb-2">Lịch sử giao dịch (Nhập tay)</h3>
                            <p class="text-sm text-gray-600 mb-4">Ghi lại các giao dịch mua/bán để tính toán hiệu quả. (Tính năng xuất file thuế sắp ra mắt)</p>
                            <div id="investment-transactions" class="space-y-2 max-h-80 overflow-y-auto pr-2">
                                <!-- Transactions will be listed here -->
                                <p class="text-gray-500">Chưa có giao dịch nào.</p>
                            </div>
                             <button id="add-investment-tx-btn" class="mt-4 w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors">Thêm Giao Dịch Đầu Tư</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Education View -->
            <div id="education-view" class="view">
                 <div class="bg-white shadow-md rounded-xl p-6">
                    <h2 class="text-2xl font-bold mb-4">Phát Triển Bản Thân</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-semibold mb-2">Gợi Ý Lộ Trình Học Tập</h3>
                            <p class="text-sm text-gray-600 mb-4">Nhập lĩnh vực bạn quan tâm, AI sẽ gợi ý sách, khóa học và lộ trình phù hợp.</p>
                            <div class="space-y-3">
                                <div>
                                    <label for="interest-field" class="font-medium">Lĩnh vực quan tâm</label>
                                    <input type="text" id="interest-field" placeholder="VD: Phát triển Web, Trí tuệ nhân tạo, Marketing..." class="w-full p-2 border rounded-lg mt-1">
                                </div>
                                <button id="get-suggestions-btn" class="w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-teal-600 transition-colors flex items-center justify-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>
                                    <span>Nhận Gợi Ý</span>
                                </button>
                            </div>
                        </div>
                        <div id="suggestions-container" class="bg-gray-50 rounded-lg p-4 h-96 overflow-y-auto">
                            <div id="suggestions-loading" class="text-center hidden">
                                <p>AI đang suy nghĩ, vui lòng chờ...</p>
                            </div>
                            <div id="suggestions-result" class="prose max-w-none">
                                <p class="text-gray-500">Kết quả gợi ý sẽ xuất hiện ở đây.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Add Transaction Modal -->
    <div id="transaction-modal" class="fixed inset-0 z-50 items-center justify-center hidden">
        <div class="modal-backdrop fixed inset-0"></div>
        <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md z-10 m-4">
            <h2 id="transaction-modal-title" class="text-2xl font-bold mb-6">Thêm Giao Dịch</h2>
            <form id="transaction-form">
                <input type="hidden" id="transaction-type">
                <div class="mb-4">
                    <label for="transaction-amount" class="block text-gray-700 font-medium mb-2">Số tiền</label>
                    <input type="number" id="transaction-amount" class="w-full p-3 border rounded-lg" placeholder="0" required>
                </div>
                <div class="mb-4">
                    <label for="transaction-description" class="block text-gray-700 font-medium mb-2">Mô tả</label>
                    <input type="text" id="transaction-description" class="w-full p-3 border rounded-lg" placeholder="VD: Lương tháng 7, Tiền ăn tối" required>
                </div>
                <div class="mb-6">
                    <label for="transaction-jar" class="block text-gray-700 font-medium mb-2">Chọn hũ</label>
                    <select id="transaction-jar" class="w-full p-3 border rounded-lg bg-white">
                        <!-- Options will be populated by JS -->
                    </select>
                </div>
                <div class="flex justify-end gap-4">
                    <button type="button" id="cancel-transaction-btn" class="px-6 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 font-semibold">Hủy</button>
                    <button type="submit" class="px-6 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 font-semibold">Lưu</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Jar Detail Modal -->
    <div id="jar-detail-modal" class="fixed inset-0 z-50 items-center justify-center hidden">
        <div class="modal-backdrop fixed inset-0"></div>
        <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-2xl z-10 m-4 flex flex-col">
            <div class="flex justify-between items-start">
                <h2 id="jar-detail-title" class="text-2xl font-bold mb-2">Chi tiết hũ</h2>
                <button id="close-jar-detail-btn" class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
            </div>
            <p id="jar-detail-description" class="text-gray-600 mb-6"></p>
            <div class="flex-grow overflow-y-auto max-h-[60vh]">
                <h3 class="font-semibold text-lg mb-4">Lịch sử giao dịch</h3>
                <div id="jar-detail-transactions" class="space-y-3">
                    <!-- Transaction history for the jar -->
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application Logic -->
    <script src="/project-root/script.js"></script>
</body>
</html>
